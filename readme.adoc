= jQAssistant CodeCharta Plugin

This is the https://codecharta.com//[CodeCharta^] plugin for https://jqassistant.org[jQAssistant^].

It provides the capability to export `cc.json` reports to visualize code structures and metrics in CodeCharta



For more information on jQAssistant see https://jqassistant.org[^].

== Using the jqassistant-codecharta-plugin

=== Configuration

[source, yaml]
..jqassistant.yml
----
jqassistant:
  plugins:
    - group-id: org.jqassistant.plugin <1>
      artifact-id: jqassistant-codecharta-plugin
      version: ${jqassistant.codecharta-plugin.version} # (1)
----
<1> Dependency to the CodeCharta plugin

=== Rule

.jqassistant/rules.xml
[source,xml]
.Rule using CodeCharta report
----
<jqassistant-rules xmlns="http://schema.jqassistant.org/rule/v2.2"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://schema.jqassistant.org/rule/v2.2 https://jqassistant.github.io/jqassistant/current/schema/jqassistant-rule-v2.2.xsd">
    <concept id="codecharta-test:Report">
        <description>Creates a CodeCharta JSON report.</description>
        <cypher><![CDATA[
            MATCH
              (root:Directory)-[:CONTAINS*]->(element:File)
            WHERE
              not (:Directory)-[:CONTAINS]->(root)
            WITH
              element, split(element.fileName, "/") as pathSegments
            OPTIONAL MATCH
              (root)-[:CONTAINS]->(parent:Directory)-[:CONTAINS]->(element)
            RETURN
              element, pathSegments[size(pathSegments)-1] as elementLabel, parent, { length: size(element.fileName) } AS metrics
            ]]></cypher>
        <report type="codecharta"/> <!--1-->
    </concept>
</jqassistant-rules>
----
<1> The report declaration
